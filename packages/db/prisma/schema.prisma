generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Project {
  id Int @id @default(autoincrement())
  title String
  estimatedEndDate DateTime
  category CategoryProject
  description String?
  createdDate DateTime @default(now())
  Tasks Task[] 
}

model Task {
  id Int @id @default(autoincrement())
  name String
  description String
  state TaskState @default(NOT_STARTED)

  projectId Int
  project Project @relation(fields: [projectId],references: [id],onDelete: Cascade)
  //TODO: A TASK CAN HAS MULTIPLE FATHERS
  parentId Int?
  parent Task? @relation("TaskHistory",fields: [parentId],references: [id])

  children Task[] @relation("TaskHistory")
}

enum CategoryProject{
    DEVOIR
    EXAM
    PROJET
}
enum TaskState{
  IN_PROGRESS
  FINISHED
  NOT_STARTED
}